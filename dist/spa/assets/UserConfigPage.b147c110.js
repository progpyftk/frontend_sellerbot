import{Q as f,a as y}from"./QCard.500bb8bd.js";import{Q}from"./QSeparator.b8ab50c2.js";import{Q as x,a as d}from"./QForm.bbfa43b9.js";import{Q as w}from"./QBtn.f527723b.js";import{Q as C}from"./QPage.4944d9b6.js";import{L as q,I as _,l as g,n as S,o as v,v as h,w as t,f as r,a as I,Y as k,p as B,g as E,e as N}from"./index.ec299b2b.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.6793015f.js";import"./use-key-composition.d1d1fa97.js";import"./focus-manager.e0009633.js";const z=m=>(B("data-v-2a52ba1a"),m=m(),E(),m),D=z(()=>N("div",{class:"text-h6 text-center"},"Configura\xE7\xF5es do Usu\xE1rio",-1)),F={key:0,class:"q-mt-md"},A={__name:"UserConfigPage",setup(m){var p,c;const n=q(),a=_({username:((p=n.currentUser)==null?void 0:p.username)||"",email:((c=n.currentUser)==null?void 0:c.email)||"",password:"",password_confirmation:""}),e=_({username:null,email:null,password:null,password_confirmation:null}),i=g(!1),u=g(!1),V=async()=>{u.value=!0,b();try{const s=await api.put("/users/me/",{username:a.username,email:a.email,password:a.password||void 0,password_confirmation:a.password_confirmation||void 0});console.log("Dados atualizados com sucesso:",s.data),alert("Dados atualizados com sucesso")}catch(s){s.response&&s.response.data?U(s.response.data):console.error("Erro ao atualizar dados do usu\xE1rio:",s)}finally{u.value=!1}},b=()=>{e.username=null,e.email=null,e.password=null,e.password_confirmation=null},U=s=>{s.username&&(e.username=s.username[0]),s.email&&(e.email=s.email[0]),s.password&&(e.password=s.password[0]),s.password_confirmation&&(e.password_confirmation=s.password_confirmation[0])};return S(()=>{n.currentUser&&(a.username=n.currentUser.username,a.email=n.currentUser.email)}),(s,o)=>(v(),h(C,{class:"q-pa-md flex flex-center"},{default:t(()=>[r(y,{class:"q-pa-lg",style:{width:"400px"}},{default:t(()=>[r(f,null,{default:t(()=>[D]),_:1}),r(Q),r(f,null,{default:t(()=>[r(x,{onSubmit:V},{default:t(()=>[r(d,{modelValue:a.username,"onUpdate:modelValue":o[0]||(o[0]=l=>a.username=l),label:"Nome de usu\xE1rio",outlined:"",dense:"",class:"q-mb-md",error:!!e.username,"error-message":e.username},null,8,["modelValue","error","error-message"]),r(d,{modelValue:a.email,"onUpdate:modelValue":o[1]||(o[1]=l=>a.email=l),label:"Email",outlined:"",dense:"",class:"q-mb-md",error:!!e.email,"error-message":e.email},null,8,["modelValue","error","error-message"]),r(w,{label:"Salvar altera\xE7\xF5es",type:"submit",color:"primary",unelevated:"",class:"q-mt-md full-width",loading:u.value},null,8,["loading"]),r(w,{label:"Alterar senha",flat:"",color:"secondary",class:"q-mt-sm full-width",onClick:o[2]||(o[2]=l=>i.value=!i.value)}),i.value?(v(),I("div",F,[r(d,{modelValue:a.password,"onUpdate:modelValue":o[3]||(o[3]=l=>a.password=l),label:"Nova senha",type:"password",outlined:"",dense:"",class:"q-mb-md",error:!!e.password,"error-message":e.password},null,8,["modelValue","error","error-message"]),r(d,{modelValue:a.password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=l=>a.password_confirmation=l),label:"Confirmar nova senha",type:"password",outlined:"",dense:"",class:"q-mb-md",error:!!e.password_confirmation,"error-message":e.password_confirmation},null,8,["modelValue","error","error-message"])])):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}};var R=P(A,[["__scopeId","data-v-2a52ba1a"]]);export{R as default};
